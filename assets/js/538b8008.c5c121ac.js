"use strict";(self.webpackChunkflakular=self.webpackChunkflakular||[]).push([[2965],{965:(e,l,s)=>{s.r(l),s.d(l,{assets:()=>o,contentTitle:()=>i,default:()=>h,frontMatter:()=>n,metadata:()=>r,toc:()=>d});var a=s(5893),t=s(1151);const n={slug:"/haskell-flake/start",sidebar_position:1},i="Getting Started",r={id:"modules/haskell-flake/start/start",title:"Getting Started",description:"Before using haskell-flake you must first install Nix.",source:"@site/docs/modules/haskell-flake/start/start.md",sourceDirName:"modules/haskell-flake/start",slug:"/haskell-flake/start",permalink:"/haskell-flake/start",draft:!1,unlisted:!1,editUrl:"https://github.com/srid/haskell-flake/blob/master/doc/start/start.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{slug:"/haskell-flake/start",sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Haskell",permalink:"/haskell-flake"},next:{title:"Guide",permalink:"/haskell-flake/guide"}},o={},d=[{value:"Existing projects",id:"existing-projects",level:2},{value:"New projects",id:"new-projects",level:2},{value:"Template",id:"template",level:3},{value:"Under the hood",id:"under-the-hood",level:2},{value:"Next steps",id:"next-steps",level:2}];function c(e){const l={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.h1,{id:"getting-started",children:"Getting Started"}),"\n",(0,a.jsxs)(l.p,{children:["Before using ",(0,a.jsx)(l.code,{children:"haskell-flake"})," you must first ",(0,a.jsx)(l.a,{href:"/install",children:"install Nix"}),"."]}),"\n",(0,a.jsx)(l.h2,{id:"existing-projects",children:"Existing projects"}),"\n",(0,a.jsxs)(l.p,{children:["To use ",(0,a.jsx)(l.code,{children:"haskell-flake"})," in an ",(0,a.jsx)(l.em,{children:"existing"})," Haskell project, run:"]}),"\n",(0,a.jsx)(l.pre,{children:(0,a.jsx)(l.code,{className:"language-bash",children:"nix flake init -t github:srid/haskell-flake\n"})}),"\n",(0,a.jsxs)(l.p,{children:["Open the generated ",(0,a.jsx)(l.code,{children:"flake.nix"})," and change ",(0,a.jsx)(l.code,{children:"self'.packages.example"})," to use your package name. For example, if your package is named ",(0,a.jsx)(l.code,{children:"my-package"})," (with a ",(0,a.jsx)(l.code,{children:"my-package.cabal"})," file), change ",(0,a.jsx)(l.code,{children:"example"})," to ",(0,a.jsx)(l.code,{children:"my-package"}),". Follow the comments along the ",(0,a.jsx)(l.code,{children:"flake.nix"})," to make any necessary changes to the project configuration."]}),"\n",(0,a.jsx)(l.h2,{id:"new-projects",children:"New projects"}),"\n",(0,a.jsxs)(l.p,{children:["To create a ",(0,a.jsx)(l.em,{children:"new"})," Haskell project, instead, run:"]}),"\n",(0,a.jsx)(l.pre,{children:(0,a.jsx)(l.code,{className:"language-bash",children:"mkdir example && cd ./example\nnix flake init -t github:srid/haskell-flake#example\n"})}),"\n",(0,a.jsx)(l.h3,{id:"template",children:"Template"}),"\n",(0,a.jsxs)(l.p,{children:["You may also use ",(0,a.jsx)(l.a,{href:"https://github.com/srid/haskell-template",children:"https://github.com/srid/haskell-template"})," which already uses ",(0,a.jsx)(l.code,{children:"haskell-flake"})," along with other opinionated defaults."]}),"\n",(0,a.jsx)(l.h2,{id:"under-the-hood",children:"Under the hood"}),"\n",(0,a.jsx)(l.admonition,{title:"Under the hood",type:"tip",children:(0,a.jsxs)(l.p,{children:["See ",(0,a.jsx)(l.a,{href:"/nixpkgs-haskell",children:"this tutorial"})," to understand what it takes to package a Haskell application without haskell-flake."]})}),"\n",(0,a.jsxs)(l.p,{children:["When nixifying a Haskell project without flake-parts (thus without haskell-flake) you would generally use the ",(0,a.jsx)(l.a,{href:"/nixpkgs-haskell",children:"raw Haskell infrastructure from nixpkgs"}),". haskell-flake uses these functions, while exposing a simpler ",(0,a.jsx)(l.a,{href:"/mod",children:"modular"})," API on top: your ",(0,a.jsx)(l.code,{children:"flake.nix"})," becomes more ",(0,a.jsx)(l.a,{href:"https://github.com/srid/haskell-template/blob/304fb5a1adfb25c7691febc15911b588a364a5f7/flake.nix#L27-L39",children:"declarative"})," and less ",(0,a.jsx)(l.a,{href:"https://github.com/srid/haskell-template/blob/3fc6858830ecee3d2fe1dfe9a8bfa2047cf561ac/flake.nix#L20-L79",children:"imperative"}),"."]}),"\n",(0,a.jsx)(l.p,{children:"In addition, compared to using plain nixpkgs, haskell-flake supports:"}),"\n",(0,a.jsxs)(l.ul,{children:["\n",(0,a.jsxs)(l.li,{children:["Auto-detection of local packages based on ",(0,a.jsx)(l.code,{children:"cabal.project"})," file (via ",(0,a.jsx)(l.a,{href:"https://github.com/srid/haskell-flake/tree/master/nix/haskell-parsers",children:"haskell-parsers"}),")"]}),"\n",(0,a.jsxs)(l.li,{children:["Parse executables from ",(0,a.jsx)(l.code,{children:".cabal"})," file"]}),"\n",(0,a.jsxs)(l.li,{children:["Modular interface to ",(0,a.jsx)(l.code,{children:"pkgs.haskell.lib.compose.*"})," (via ",(0,a.jsx)(l.code,{children:"packages"})," and ",(0,a.jsx)(l.code,{children:"settings"})," submodules)"]}),"\n",(0,a.jsx)(l.li,{children:"Composition of dependency overrides, and other project settings, via [[modules]]"}),"\n"]}),"\n",(0,a.jsx)(l.h2,{id:"next-steps",children:"Next steps"}),"\n",(0,a.jsxs)(l.p,{children:["Visit ",(0,a.jsx)(l.a,{href:"/haskell-flake/guide",children:"Guide"})," for more details, and ",(0,a.jsx)(l.a,{href:"/haskell-flake/ref",children:"Reference"})," for module options."]})]})}function h(e={}){const{wrapper:l}={...(0,t.a)(),...e.components};return l?(0,a.jsx)(l,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},1151:(e,l,s)=>{s.d(l,{Z:()=>r,a:()=>i});var a=s(7294);const t={},n=a.createContext(t);function i(e){const l=a.useContext(n);return a.useMemo((function(){return"function"==typeof e?e(l):{...l,...e}}),[l,e])}function r(e){let l;return l=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),a.createElement(n.Provider,{value:l},e.children)}}}]);